# This Makefile was generated by the Cake3
# https://github.com/grwlf/cake3

GUARD = .cake3/GUARD_$(1)_$(shell echo $($(1)) | md5sum | cut -d ' ' -f 1)

ifeq ($(MAIN),1)
unexport MAIN

# Main section

UR_CC = $(shell $(shell urweb -print-ccompiler) -print-prog-name=gcc)
UR_INCL = -I$(shell urweb -print-cinclude) 
.PHONY: ./all
./all: ./Makefile ./lib.urp
./.cake3/tmp___lib_in_2: ./Makefile ./CSS.ur ./CSS.urs ./Script.h ./Script.o ./Uru.ur ./Uru.urs
	( \
	echo   ;\
	echo $$\/list  ;\
	echo \.\/CSS  ;\
	echo \.\/Uru  ;\
	) > ./.cake3/tmp___lib_in_2
./.cake3/tmp___lib_in_1: ./Makefile ./CSS.ur ./CSS.urs ./Script.h ./Script.o ./Uru.ur ./Uru.urs
	( \
	echo ffi\ \.\/Script  ;\
	echo include\ \.\/Script\.h  ;\
	echo link\ \.\/Script\.o  ;\
	) > ./.cake3/tmp___lib_in_1
./Script.o: ./Makefile ./Script.c $(call GUARD,UR_CC) $(call GUARD,UR_CFLAGS) $(call GUARD,UR_INCL)
	$(UR_CC) -c $(UR_INCL) $(UR_CFLAGS)  -o ./Script.o ./Script.c
./lib.urp: ./Makefile ./.cake3/tmp___lib_in_1 ./.cake3/tmp___lib_in_2
	cat ./.cake3/tmp___lib_in_1 > ./lib.urp
	cat ./.cake3/tmp___lib_in_2 >> ./lib.urp
$(call GUARD,UR_CC):
	rm -f .cake3/GUARD_UR_CC_*
	touch $@
$(call GUARD,UR_CFLAGS):
	rm -f .cake3/GUARD_UR_CFLAGS_*
	touch $@
$(call GUARD,UR_INCL):
	rm -f .cake3/GUARD_UR_INCL_*
	touch $@

else

# Prebuild/postbuild section

ifneq ($(MAKECMDGOALS),clean)

.PHONY: ./all
./all: ./.fix-multy1
.PHONY: ./.cake3/tmp___lib_in_2
./.cake3/tmp___lib_in_2: ./.fix-multy1
.PHONY: ./.cake3/tmp___lib_in_1
./.cake3/tmp___lib_in_1: ./.fix-multy1
.INTERMEDIATE: ./.fix-multy1
./.fix-multy1: 
	-mkdir .cake3
	MAIN=1 $(MAKE) -f ./Makefile $(MAKECMDGOALS)
.PHONY: ./Script.o
./Script.o: ./.fix-multy1
.PHONY: ./lib.urp
./lib.urp: ./.fix-multy1

endif
.PHONY: ./clean
./clean: 
	-rm ./.cake3/tmp___lib_in_1 ./.cake3/tmp___lib_in_2 ./Script.o ./lib.urp
	-rm -rf .cake3

endif
